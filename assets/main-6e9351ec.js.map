{"version":3,"file":"main-6e9351ec.js","sources":["../../src/wa-lib.ts","../../src/main.ts"],"sourcesContent":["/// <reference types=\"@workadventure/iframe-api-typings\" />\n\nimport { bootstrapExtra } from \"@workadventure/scripting-api-extra\";\nimport { ButtonDescriptor } from \"@workadventure/iframe-api-typings\";\nimport { ActionBarActionButtonDescriptor } from \"@workadventure/iframe-api-typings/front/Api/Iframe/Ui/ButtonActionBar\";\n\nclass WAE {\n    buttons: {\n        close: ButtonDescriptor,\n    } = {\n        close: {\n            label: \"Schließen\",\n            className: \"primary\",\n            callback: (popup) => {\n                popup.close();\n            }\n        },\n    }\n\n    constructor (){\n    }\n\n    async init(){\n        WA.onInit().then(() => {\n            console.log('Scripting API ready');\n            console.log('Player tags: ',WA.player.tags)\n            \n            // The line below bootstraps the Scripting API Extra library that adds a number of advanced properties/features to WorkAdventure\n            bootstrapExtra().then(() => {\n                console.log('Scripting API Extra ready');\n            }).catch(e => console.error(e));\n        \n        }).catch(e => console.error(e));\n    }\n\n    popUp(area: string, display: string, text: string, buttons: ButtonDescriptor[]){\n        let currentPopup: any = undefined;\n        WA.room.area.onEnter(area).subscribe(() => {\n            currentPopup = WA.ui.openPopup(display, text, buttons);\n        });\n    \n        WA.room.area.onLeave(area).subscribe(closePopup);\n        function closePopup(){\n            if (currentPopup !== undefined) {\n                currentPopup.close();\n                currentPopup = undefined;\n            }\n        }\n    }\n\n    popUpNoArea(display: string, text: string, buttons: ButtonDescriptor[]){\n        WA.ui.openPopup(display, text, buttons);\n    }\n\n    modal(title: string, src: string, api: boolean){\n        WA.ui.modal.openModal({\n            position: \"right\",\n            title: title,\n            src: src,\n            allow: \"fullscreen\",\n            allowApi: api\n        });\n    }\n\n    modalOnArea(area: string, title: string, src: string, api: boolean){\n        let currentModal: any = undefined;\n        WA.room.area.onEnter(area).subscribe(() => {\n            currentModal = WA.ui.modal.openModal({\n                position: \"right\",\n                title: title,\n                src: src,\n                allow: \"fullscreen\",\n                allowApi: api\n            });\n        });\n        WA.room.area.onLeave(area).subscribe(closeModal);\n        function closeModal(){\n            if (currentModal !== undefined) {\n                currentModal.close();\n                currentModal = undefined;\n            }\n        }\n    }\n\n    async cameraEvent(x: number, y: number, area: string){\n        let base64image: string = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAATZJREFUaEPtmcsNwjAMhr+uAwPABrANEgsACyCxDWwAA8A6IB8qIRHixE2VPuxLL3b6Pxw1qRtGHs3I8eMEajvoDgzdgRVwAeQZiyNwyiRzAKQuFg9gB8gzGLEWWgDPRFB9EWhfvwReISwxAldgMxACN2CbS+D9VVBrs6sYYsDU4kR3uqSpGJxAF3kTat2BViTfxAntEkqZdwvJp76N3GOCUfCfMhVDrd4uRdAvNMWUtC7kLWRVrlSdO1BKSes67oBVuVJ17kApJa3rTNoB9SBlVS2jTsXgd+IMNS2p877QqOwtkmbWqBh8D2QqmpvuDoz6v9A9YbDREux7PiADjnWo/2KbWKYyQiIl+iYg4INTGu0sJFOac8Kgoy8CMtjY/5vOiLIagRT1q+Y4garyewvVln8KDnwADiM+McXkgF4AAAAASUVORK5CYII=\"\n        let b1: ActionBarActionButtonDescriptor = {\n            \"id\":\"kamera\",\n            \"type\":\"action\",\n            \"imageSrc\":base64image,\n            \"toolTip\":\"Auf Bühne zoomen\",\n            \"callback\": () => {\n                WA.camera.set(x,y,undefined,undefined,true,true);\n                WA.ui.actionBar.removeButton(\"kamera\");\n                WA.ui.actionBar.addButton(b2);\n            }\n        }\n        let b2: ActionBarActionButtonDescriptor = {\n            \"id\":\"kamera2\",\n            \"type\":\"action\",\n            \"imageSrc\": await WA.player.getWokaPicture(),\n            \"toolTip\":\"Auf Spieler zoomen\",\n            \"callback\": () => {\n                WA.camera.followPlayer(true);\n                WA.ui.actionBar.removeButton(\"kamera2\");\n                WA.ui.actionBar.addButton(b1);\n            }\n        }\n\n        \n        WA.room.area.onEnter(area).subscribe(() => {\n            WA.ui.actionBar.addButton(b1);\n        });\n        WA.room.area.onLeave(area).subscribe(() => {\n            WA.camera.followPlayer(true);\n            WA.ui.actionBar.removeButton(\"kamera\");\n            WA.ui.actionBar.removeButton(\"kamera2\");\n        });\n    }\n\n    minimapButton(){\n        let currentWebsite: any = undefined;\n        WA.ui.actionBar.addButton({\n            \"id\":\"minimap\",\n            \"type\":\"action\",\n            \"imageSrc\":\"https://buenni86.github.io/tag-der-ausbildung/src/mapLogo.png\",\n            \"toolTip\":\"Minimap\",\n            \"callback\": async () => {\n                if (currentWebsite !== undefined) {\n                    currentWebsite.close();\n                    currentWebsite = undefined;\n                } else {\n                    currentWebsite = await WA.nav.openCoWebSite(\"https://buenni86.github.io/tag-der-ausbildung/src/minimapper\",true);\n                }\n            }\n        })\n    }\n}\n\nexport default WAE;","console.log('Script started successfully');\n\nimport WAE from \"./wa-lib\";\n\nlet wae = new WAE();\n\nwae.init().then(() => {\n    wae.popUpNoArea(\"infoPopUp\",\"Willkommen bei Workadveutre!\\nBewege dich mit WASD, Pfeiltasten oder Rechtsklick.\\nDieses Event wird teilweise Aufgezeichnet\",[wae.buttons.close]);\n    wae.minimapButton();\n    wae.cameraEvent(640,735,\"bühne\");\n});"],"names":["WAE","__publicField","popup","bootstrapExtra","area","display","text","buttons","currentPopup","closePopup","title","src","api","currentModal","closeModal","x","y","b1","b2","currentWebsite","wae"],"mappings":"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"}